<polymer-element 
name="card-tray" 
attributes="pattern"
>
  <template>
    <link rel="stylesheet" href="./card-tray.css">
    <content></content>

  </template>

  <script>
    Polymer('card-tray', {
      publish: { // If you want to expose properties as tag attributes
        pattern: {value: 'stream', reflect: true}
      },
      patternChanged: function(){
        this.classList.remove('stream');
        this.classList.remove('quilt');
        switch(this.pattern){
          case "stream":
            this.classList.add('stream'); break;
          case "quilt":
            this.classList.add('quilt'); break;
          default: 
            this.classList.add('stream'); break;
        };
      },
      attached: function(){
        this.classList.add('stream');
        var that = this;
        document.addEventListener('card-tray-pattern-change', function(e){
          console.log('Heard card-tray-pattern-change');
          var newPattern = e.detail.pattern;
          if(!newPattern){
            console.log('Bad event', e);
            newPattern = "stream";
          }
          that.pattern = newPattern;
        });
      },
    });
  </script>
</polymer-element>
